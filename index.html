<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook</title>
    <style>
        :root {
            --fb-bg: #F0F2F5;
            --fb-header-bg: #FFFFFF;
            --fb-card-bg: #FFFFFF;
            --fb-primary: #1877F2;
            --fb-text-primary: #050505;
            --fb-text-secondary: #65676B;
            --fb-hover: #E4E6EB;
            --fb-divider: #CED0D4;
            --ooredoo-red: #E4002B;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            background-color: var(--fb-bg);
            color: var(--fb-text-primary);
            overflow-x: hidden;
        }
        .header {
            background: var(--fb-header-bg); height: 56px; width: 100%;
            position: fixed; top: 0; z-index: 100;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            display: flex; justify-content: space-between; align-items: center; padding: 0 16px;
        }
        .header-left { display: flex; align-items: center; gap: 10px; }
        .fb-logo { width: 40px; height: 40px; }
        .search-bar {
            background: #F0F2F5; border-radius: 50px; padding: 9px 16px;
            display: flex; align-items: center; width: 240px;
            color: var(--fb-text-secondary); font-size: 15px;
        }
        .header-right { display: flex; gap: 8px; }
        .icon-btn {
            width: 40px; height: 40px; background: #E4E6EB; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; cursor: pointer;
        }
        .icon-btn:hover { background: #D8DADF; }
        .main-container { display: flex; justify-content: center; padding-top: 72px; min-height: 100vh; }
        .sidebar { width: 360px; position: fixed; height: 100vh; overflow-y: auto; padding: 0 8px; display: none; }
        .sidebar-left { left: 0; top: 56px; }
        .sidebar-right { right: 0; top: 56px; width: 280px; }
        @media (min-width: 1100px) { .sidebar { display: block; } }
        .feed { width: 100%; max-width: 590px; margin: 0 32px; }
        .nav-item { display: flex; align-items: center; padding: 8px; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 15px; }
        .nav-item:hover { background: var(--fb-hover); }
        .nav-icon { width: 36px; height: 36px; border-radius: 50%; margin-right: 12px; }
        .contact-header { color: var(--fb-text-secondary); font-weight: 600; margin: 20px 8px 8px; font-size: 17px; }
        .post { background: var(--fb-card-bg); border-radius: 8px; box-shadow: 0 1px 2px rgba(0,0,0,0.1); margin-bottom: 16px; padding-bottom: 4px; }
        .post-header { padding: 12px 16px 0; display: flex; margin-bottom: 12px; }
        .user-avatar { width: 40px; height: 40px; border-radius: 50%; margin-right: 10px; }
        .post-info h4 { font-size: 15px; font-weight: 600; margin-bottom: 2px; }
        .post-meta { font-size: 13px; color: var(--fb-text-secondary); display: flex; align-items: center; gap: 4px; }
        .post-content { font-size: 15px; padding: 0 16px 16px; line-height: 1.4; }
        .post-content[dir="rtl"] { text-align: right; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .post-image { width: 100%; height: auto; display: block; border-top: 1px solid var(--fb-divider); border-bottom: 1px solid var(--fb-divider); }
        .post-stats { padding: 10px 16px; display: flex; justify-content: space-between; color: var(--fb-text-secondary); font-size: 15px; border-bottom: 1px solid var(--fb-divider); margin: 0 16px; }
        .post-actions { display: flex; padding: 4px 16px; }
        .action-btn { flex: 1; display: flex; align-items: center; justify-content: center; height: 36px; border-radius: 4px; color: var(--fb-text-secondary); font-weight: 600; cursor: pointer; gap: 8px; font-size: 15px; }
        .action-btn:hover { background: var(--fb-hover); }
        /* â”€â”€ Popup Ad â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #popup-ad {
            position: fixed;
            bottom: -340px;
            right: 24px;
            width: 310px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.22), 0 2px 8px rgba(0,0,0,0.12);
            z-index: 500;
            overflow: hidden;
            transition: bottom 0.55s cubic-bezier(0.22, 1, 0.36, 1);
            border: 1px solid #e0e0e0;
        }
        #popup-ad.visible { bottom: 24px; }
        .popup-topbar {
            background: #E4002B; padding: 8px 12px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .popup-brand { color: white; font-weight: 800; font-size: 14px; display: flex; align-items: center; gap: 6px; }
        .popup-close {
            color: rgba(255,255,255,0.75); font-size: 20px; cursor: pointer;
            line-height: 1; padding: 0 2px; transition: color 0.15s;
            font-weight: 300;
        }
        .popup-close:hover { color: white; }
        .popup-body { padding: 12px; }
        .popup-headline { font-size: 16px; font-weight: 800; color: #E4002B; text-align: center; direction: rtl; margin-bottom: 5px; }
        .popup-sub { font-size: 11.5px; color: #555; text-align: center; margin-bottom: 10px; line-height: 1.4; }
        .popup-img { width: 100%; height: 120px; object-fit: cover; border-radius: 6px; margin-bottom: 10px; display: block; }
        .popup-countdown {
            background: #fff5f5; border: 1px solid #ffccd5; color: #d80027;
            border-radius: 5px; padding: 5px 10px; font-size: 12px; font-weight: 700;
            display: flex; justify-content: center; align-items: center; gap: 6px; margin-bottom: 10px;
        }
        #trap-btn {
            background: #E4002B; color: white; text-align: center;
            padding: 11px; border-radius: 6px; font-weight: bold;
            font-size: 13px; cursor: pointer; animation: pulse-red 2s infinite;
            display: flex; justify-content: center; align-items: center; gap: 6px;
            user-select: none; width: 100%; border: none;
        }
        #trap-btn:hover { background: #c40024; }
        @keyframes pulse-red {
            0%   { box-shadow: 0 0 0 0 rgba(228,0,43,0.7); transform: scale(1); }
            70%  { box-shadow: 0 0 0 8px rgba(228,0,43,0); transform: scale(1.02); }
            100% { box-shadow: 0 0 0 0 rgba(228,0,43,0); transform: scale(1); }
        }
        .popup-footer { font-size: 10px; color: #bbb; text-align: center; margin-top: 8px; }

        /* â”€â”€ Transition Overlays â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #flicker-overlay { position: fixed; inset: 0; background: white; z-index: 9000; opacity: 0; pointer-events: none; }
        #glitch-overlay {
            position: fixed; inset: 0; z-index: 9100; opacity: 0; pointer-events: none;
            background: repeating-linear-gradient(0deg, rgba(0,255,0,0.03) 0px, rgba(0,255,0,0.03) 1px, transparent 1px, transparent 4px);
            mix-blend-mode: screen;
        }
        #blackout-overlay {
            position: fixed; inset: 0; background: #000; z-index: 9200;
            opacity: 0; pointer-events: none;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-family: 'Courier New', monospace; font-size: 1rem;
            color: #00FF41; line-height: 2; letter-spacing: 2px;
            transition: opacity 0.6s ease-in;
        }
        #blackout-overlay .terminal-line { opacity: 0; transform: translateY(4px); transition: opacity 0.3s ease, transform 0.3s ease; }
        #blackout-overlay .terminal-line.show { opacity: 1; transform: translateY(0); }
        #trop-tard {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            z-index: 9300; font-family: 'Courier New', monospace; font-size: 2.8rem;
            font-weight: bold; color: #FF0000; letter-spacing: 6px;
            opacity: 0; pointer-events: none;
            text-shadow: 0 0 30px rgba(255,0,0,0.8); transition: opacity 0.4s ease;
        }

        /* â”€â”€ CMD Window â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #cmd-window {
            position: fixed;
            bottom: 80px; right: 80px;
            width: 530px;
            background: #0C0C0C;
            border: 1px solid #666;
            z-index: 9500;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #CCCCCC;
            box-shadow: 4px 4px 20px rgba(0,0,0,0.95);
            display: none;
            opacity: 1;
        }
        .cmd-titlebar {
            background: #1a1a1a; padding: 5px 8px;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid #333;
        }
        .cmd-title-left { display: flex; align-items: center; gap: 6px; font-size: 11px; color: #bbb; }
        .cmd-icon { font-size: 13px; }
        .cmd-controls { display: flex; }
        .cmd-ctrl {
            width: 46px; height: 22px; display: flex; align-items: center; justify-content: center;
            font-size: 10px; color: #ccc; cursor: default; transition: background 0.1s;
        }
        .cmd-ctrl:hover { background: #404040; }
        .cmd-ctrl.close:hover { background: #c42b1c; color: white; }
        .cmd-body { padding: 8px 12px; line-height: 1.75; min-height: 150px; }
        .cmd-white  { color: #FFFFFF; }
        .cmd-green  { color: #00FF41; }
        .cmd-gray   { color: #AAAAAA; }
        .cmd-prompt { color: #CCCCCC; }

        /* Body glitch */
        @keyframes body-shake {
            0%   { transform: translateX(0);    filter: none; }
            10%  { transform: translateX(-4px); filter: invert(1) hue-rotate(90deg); }
            20%  { transform: translateX(4px);  filter: invert(0); }
            30%  { transform: translateX(-6px); filter: sepia(1) saturate(5); }
            40%  { transform: translateX(6px);  filter: invert(1); }
            50%  { transform: translateX(-3px); filter: none; }
            60%  { transform: translateX(3px);  filter: invert(1) hue-rotate(180deg); }
            70%  { transform: translateX(-2px); filter: none; }
            80%  { transform: translateX(2px);  filter: invert(1); }
            90%  { transform: translateX(-1px); filter: none; }
            100% { transform: translateX(0);    filter: none; }
        }
        body.glitching { animation: body-shake 0.6s linear forwards; }
    </style>
</head>
<body>

    <!-- Transition Layers -->
    <div id="flicker-overlay"></div>
    <div id="glitch-overlay"></div>
    <div id="trop-tard">Trop tard.</div>
    <div id="blackout-overlay">
        <div class="terminal-line" id="tl1">&gt; CONNEXION Ã‰TABLIE...</div>
        <div class="terminal-line" id="tl2">&gt; COLLECTE DE DONNÃ‰ES EN COURS...</div>
        <div class="terminal-line" id="tl3">&gt; CYBER_TRAP: ACT_1_COMPLETE</div>
        <div class="terminal-line" id="tl4" style="color:#FF0000;">&gt; INITIALIZING ACT_2...</div>
    </div>

    <!-- CMD Window -->
    <div id="cmd-window">
        <div class="cmd-titlebar">
            <div class="cmd-title-left">
                <span class="cmd-icon">â¬›</span>
                <span>C:\Windows\System32\cmd.exe</span>
            </div>
            <div class="cmd-controls">
                <div class="cmd-ctrl">&#8722;</div>
                <div class="cmd-ctrl">&#9633;</div>
                <div class="cmd-ctrl close">&#10005;</div>
            </div>
        </div>
        <div class="cmd-body">
            <div class="cmd-gray">Microsoft Windows [Version 10.0.19045.4170]</div>
            <div class="cmd-gray">(c) Microsoft Corporation. Tous droits rÃ©servÃ©s.</div>
            <br>
            <div><span class="cmd-prompt">C:\Users\Mohamed&gt; </span><span class="cmd-white">net user backdoor Tr0jan@2024 /add</span></div>
            <div class="cmd-green">La commande s'est terminÃ©e correctement.</div>
            <br>
            <div><span class="cmd-prompt">C:\Users\Mohamed&gt; </span><span class="cmd-white">reg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run /v svchost32 /d "C:\backdoor.exe" /f</span></div>
            <div class="cmd-green">L'opÃ©ration s'est terminÃ©e correctement.</div>
            <br>
            <div><span class="cmd-prompt">C:\Users\Mohamed&gt; </span><span class="cmd-white">exit</span></div>
        </div>
    </div>

    <!-- â”€â”€ Popup Ad (the trap) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="popup-ad">
        <div class="popup-topbar">
            <div class="popup-brand">
                <span style="background:white;color:#E4002B;font-weight:900;border-radius:3px;padding:1px 5px;font-size:12px;">O</span>
                Ooredoo Tunisie ğŸ‡¹ğŸ‡³
            </div>
            <div class="popup-close" id="popup-close-btn">&times;</div>
        </div>
        <div class="popup-body">
            <div class="popup-headline">ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ø£Ù†Øª Ù…Ù† Ø§Ù„Ù…Ø­Ø¸ÙˆØ¸ÙŠÙ†!</div>
            <div class="popup-sub">Vous avez Ã©tÃ© sÃ©lectionnÃ© parmi nos abonnÃ©s fidÃ¨les pour gagner un Samsung Galaxy S24 !</div>
            <img src="https://images.samsung.com/sg/smartphones/galaxy-s24-ultra/images/galaxy-s24-ultra-highlights-color-titanium-gray-back-mo.jpg?imbypass=true" class="popup-img" alt="Prix">
            <div class="popup-countdown">
                â±ï¸ Offre expire dans: <span id="countdown" style="font-weight:900;">09:47</span>
            </div>
            <button id="trap-btn">ğŸ RÃ©clamer mon prix maintenant</button>
            <div class="popup-footer">SponsorisÃ© Â· Ooredoo S.A. Â· Tunis</div>
        </div>
    </div>

    <!-- Header -->
    <div class="header">
        <div class="header-left">
            <svg class="fb-logo" viewBox="0 0 36 36" fill="url(#fb-grad)">
                <defs>
                    <linearGradient x1="50%" x2="50%" y1="97%" y2="0%" id="fb-grad">
                        <stop offset="0%" stop-color="#0062E0"/>
                        <stop offset="100%" stop-color="#19AFFF"/>
                    </linearGradient>
                </defs>
                <path d="M15 35.8C6.5 34.3 0 26.9 0 18 0 8.1 8.1 0 18 0s18 8.1 18 18c0 8.9-6.5 16.3-15 17.8l-1-.8h-4l-1 .8z"/>
                <path fill="#fff" d="M25 23l.8-5H21v-3.5c0-1.4.5-2.5 2.7-2.5H26V7.4c-1.3-.2-2.7-.4-4-.4-4.1 0-7 2.5-7 7v4h-4.5v5H15v12.7c1 .2 2 .3 3 .3s2-.1 3-.3V23h4z"/>
            </svg>
            <div class="search-bar">ğŸ” &nbsp; Recherche Facebook</div>
        </div>
        <div class="header-right">
            <div class="icon-btn">ğŸ’¬</div>
            <div class="icon-btn">ğŸ””</div>
            <div class="icon-btn">
                <img src="https://ui-avatars.com/api/?name=Mohamed+Trabelsi&background=random" style="border-radius:50%; width:28px;">
            </div>
        </div>
    </div>

    <div class="main-container">
        <!-- Left Sidebar -->
        <div class="sidebar sidebar-left">
            <div class="nav-item"><img src="https://ui-avatars.com/api/?name=Mohamed+Trabelsi&background=random" class="nav-icon"><span>Mohamed Trabelsi</span></div>
            <div class="nav-item"><img src="https://cdn-icons-png.flaticon.com/512/1946/1946488.png" class="nav-icon"><span>Amis</span></div>
            <div class="nav-item"><img src="https://cdn-icons-png.flaticon.com/512/166/166258.png" class="nav-icon"><span>Groupes</span></div>
            <div class="nav-item"><img src="https://cdn-icons-png.flaticon.com/512/3081/3081559.png" class="nav-icon"><span>Marketplace</span></div>
            <div class="nav-item"><img src="https://cdn-icons-png.flaticon.com/512/2991/2991195.png" class="nav-icon"><span>Watch</span></div>
        </div>

        <!-- Feed -->
        <div class="feed">
            <!-- Create Post -->
            <div class="post">
                <div style="padding:12px 16px;display:flex;gap:10px;border-bottom:1px solid #CED0D4;">
                    <img src="https://ui-avatars.com/api/?name=Mohamed+Trabelsi&background=random" class="user-avatar">
                    <div style="background:#F0F2F5;border-radius:20px;padding:10px 16px;flex:1;color:#65676B;cursor:text;">Quoi de neuf, Mohamed ?</div>
                </div>
            </div>

            <!-- Post 1 -->
            <div class="post">
                <div class="post-header">
                    <img src="https://ui-avatars.com/api/?name=Fatma+Belhaj&background=e91e63&color=fff" class="user-avatar">
                    <div class="post-info"><h4>Fatma Belhaj</h4><div class="post-meta">2 h Â· ğŸŒ</div></div>
                </div>
                <div class="post-content" dir="rtl">Saha ftourkom el jami3 ğŸŒ™â¤ï¸ #Ramadan #Tunisie</div>
                <div class="post-stats"><span>ğŸ‘ â¤ï¸ 847</span><span>124 commentaires Â· 32 partages</span></div>
                <div class="post-actions">
                    <div class="action-btn">ğŸ‘ J'aime</div>
                    <div class="action-btn">ğŸ’¬ Commenter</div>
                    <div class="action-btn">â†—ï¸ Partager</div>
                </div>
            </div>

            <!-- Post 2 -->
            <div class="post">
                <div class="post-header">
                    <img src="https://ui-avatars.com/api/?name=Aziz+Mansour&background=3f51b5&color=fff" class="user-avatar">
                    <div class="post-info"><h4>Aziz Mansour</h4><div class="post-meta">4 h Â· ğŸ‘¥</div></div>
                </div>
                <div class="post-content">Attention aux arnaques sur internet!! Mon ami s'est fait avoir hier ğŸ˜¡<br>Restez vigilants les amis.</div>
                <div class="post-stats"><span>ğŸ˜¡ ğŸ‘ 234</span><span>67 commentaires</span></div>
                <div class="post-actions">
                    <div class="action-btn">ğŸ‘ J'aime</div>
                    <div class="action-btn">ğŸ’¬ Commenter</div>
                    <div class="action-btn">â†—ï¸ Partager</div>
                </div>
            </div>

            <!-- Post 2b: Replaced ad with normal post -->
            <div class="post">
                <div class="post-header">
                    <img src="https://ui-avatars.com/api/?name=Nour+Gharsalli&background=ff9800&color=fff" class="user-avatar">
                    <div class="post-info"><h4>Nour Gharsalli</h4><div class="post-meta">3 h Â· ğŸŒ</div></div>
                </div>
                <div class="post-content">Bonne nouvelle ! J'ai enfin trouvÃ© un appart Ã  Lac 2 ğŸ âœ¨ Merci Ã  tous pour les conseils</div>
                <div class="post-stats"><span>ğŸ‘ â¤ï¸ 312</span><span>58 commentaires</span></div>
                <div class="post-actions">
                    <div class="action-btn">ğŸ‘ J'aime</div>
                    <div class="action-btn">ğŸ’¬ Commenter</div>
                    <div class="action-btn">â†—ï¸ Partager</div>
                </div>
            </div>

            <!-- Post 3 -->
            <div class="post">
                <div class="post-header">
                    <img src="https://ui-avatars.com/api/?name=Sarra+Khalil&background=009688&color=fff" class="user-avatar">
                    <div class="post-info"><h4>Sarra Khalil</h4><div class="post-meta">Hier Â· ğŸŒ</div></div>
                </div>
                <div class="post-content">Weekend Ã  Sidi Bou Said ğŸ˜â˜€ï¸</div>
                <img src="https://picsum.photos/seed/sidibousaid/600/400" class="post-image" alt="Sidi Bou Said">
                <div class="post-stats"><span>â¤ï¸ ğŸ‘ 1.2K</span><span>89 commentaires</span></div>
                <div class="post-actions">
                    <div class="action-btn">ğŸ‘ J'aime</div>
                    <div class="action-btn">ğŸ’¬ Commenter</div>
                    <div class="action-btn">â†—ï¸ Partager</div>
                </div>
            </div>

            <!-- Post 4 -->
            <div class="post">
                <div class="post-header">
                    <img src="https://ui-avatars.com/api/?name=Hedi+Jaziri&background=795548&color=fff" class="user-avatar">
                    <div class="post-info"><h4>Hedi Jaziri</h4><div class="post-meta">5 h Â· ğŸ‘¥</div></div>
                </div>
                <div class="post-content">Quelqu'un connait un bon mÃ©canicien sur Tunis? La voiture fait un bruit bizarre depuis ce matin ğŸ˜©</div>
                <div class="post-stats"><span>ğŸ‘ 12</span><span>43 commentaires</span></div>
                <div class="post-actions">
                    <div class="action-btn">ğŸ‘ J'aime</div>
                    <div class="action-btn">ğŸ’¬ Commenter</div>
                    <div class="action-btn">â†—ï¸ Partager</div>
                </div>
            </div>
        </div>

        <!-- Right Sidebar -->
        <div class="sidebar sidebar-right">
            <div class="contact-header">Contacts en ligne</div>
            <div class="nav-item">
                <div style="position:relative;"><img src="https://ui-avatars.com/api/?name=Ali+Ben+Salah" class="nav-icon" style="margin:0;"><div style="width:10px;height:10px;background:#31A24C;border-radius:50%;position:absolute;bottom:2px;right:0;border:2px solid #fff;"></div></div>
                <span style="margin-left:12px;">Ali Ben Salah</span>
            </div>
            <div class="nav-item">
                <div style="position:relative;"><img src="https://ui-avatars.com/api/?name=Mariem+K" class="nav-icon" style="margin:0;"><div style="width:10px;height:10px;background:#31A24C;border-radius:50%;position:absolute;bottom:2px;right:0;border:2px solid #fff;"></div></div>
                <span style="margin-left:12px;">Mariem K</span>
            </div>
            <div class="nav-item">
                <div style="position:relative;"><img src="https://ui-avatars.com/api/?name=Youssef+T" class="nav-icon" style="margin:0;"><div style="width:10px;height:10px;background:#31A24C;border-radius:50%;position:absolute;bottom:2px;right:0;border:2px solid #fff;"></div></div>
                <span style="margin-left:12px;">Youssef T</span>
            </div>
        </div>
    </div>

    <script>
        // â”€â”€â”€ Countdown Timer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        let timeInSecs = 587;
        const timerEl = document.getElementById('countdown');
        const ticker = setInterval(() => {
            timeInSecs--;
            if (timeInSecs <= 0) { clearInterval(ticker); timerEl.innerText = "00:00"; return; }
            timerEl.innerText = `${Math.floor(timeInSecs/60).toString().padStart(2,'0')}:${(timeInSecs%60).toString().padStart(2,'0')}`;
        }, 1000);

        // â”€â”€â”€ Popup: slides in after 2.5s, close button dismisses it â”€â”€
        const popupAd = document.getElementById('popup-ad');
        const popupCloseBtn = document.getElementById('popup-close-btn');

        setTimeout(() => { popupAd.classList.add('visible'); }, 2500);

        popupCloseBtn.addEventListener('click', () => {
            popupAd.style.transition = 'bottom 0.35s cubic-bezier(0.22, 1, 0.36, 1)';
            popupAd.style.bottom = '-340px';
        });

        // â”€â”€â”€ Glitch Sound â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function playGlitchSound() {
            try {
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.connect(gain); gain.connect(ctx.destination);
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(80, ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(20, ctx.currentTime + 0.3);
                gain.gain.setValueAtTime(0.4, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.4);
                osc.start(); osc.stop(ctx.currentTime + 0.4);
            } catch(e) {}
        }

        // â”€â”€â”€ CMD Flash â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function flashCMD() {
            const cmd = document.getElementById('cmd-window');
            cmd.style.display = 'block';
            cmd.style.opacity = '1';
            // Visible for 900ms then fades out quickly
            setTimeout(() => {
                cmd.style.transition = 'opacity 0.12s ease-out';
                cmd.style.opacity = '0';
                setTimeout(() => {
                    cmd.style.display = 'none';
                    cmd.style.opacity = '1';
                    cmd.style.transition = '';
                }, 120);
            }, 900);
        }

        // â”€â”€â”€ Main Transition â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const trapBtn    = document.getElementById('trap-btn');
        const flickerEl  = document.getElementById('flicker-overlay');
        const glitchEl   = document.getElementById('glitch-overlay');
        const blackoutEl = document.getElementById('blackout-overlay');
        const tropTardEl = document.getElementById('trop-tard');
        const termLines  = document.querySelectorAll('.terminal-line');
        let transitioning = false;

        trapBtn.addEventListener('click', () => {
            if (transitioning) return;
            transitioning = true;

            // Lock button
            trapBtn.innerText = "â³ Traitement en cours...";
            trapBtn.style.background = "#555";
            trapBtn.style.animation = "none";
            trapBtn.style.cursor = "not-allowed";

            // â”€â”€ t=0ms:   CMD window flashes (backdoor hint) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            flashCMD();

            // â”€â”€ t=300ms: Body shake + glitch overlay + audio â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            setTimeout(() => {
                playGlitchSound();
                document.body.classList.add('glitching');
                glitchEl.style.opacity = '1';
                let f = 0;
                const fi = setInterval(() => {
                    flickerEl.style.opacity = flickerEl.style.opacity === '0' ? '0.85' : '0';
                    if (++f >= 6) { clearInterval(fi); flickerEl.style.opacity = '0'; }
                }, 80);
            }, 300);

            // â”€â”€ t=950ms: Blackout fades in â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            setTimeout(() => {
                document.body.classList.remove('glitching');
                glitchEl.style.opacity = '0';
                blackoutEl.style.opacity = '1';
                blackoutEl.style.pointerEvents = 'all';
            }, 950);

            // â”€â”€ t=1600ms: "Trop tard." â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            setTimeout(() => { tropTardEl.style.opacity = '1'; }, 1600);

            // â”€â”€ t=2900ms: "Trop tard." fades out â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            setTimeout(() => { tropTardEl.style.opacity = '0'; }, 2900);

            // â”€â”€ t=3300ms: Terminal lines stagger in â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            setTimeout(() => {
                termLines.forEach((l, i) => setTimeout(() => l.classList.add('show'), i * 400));
            }, 3300);

            // â”€â”€ t=5200ms: Navigate â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            setTimeout(() => { window.location.href = 'act_2.html'; }, 5200);
        });
    </script>
</body>
</html>
